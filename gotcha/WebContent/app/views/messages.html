<div ng-controller="messagesController">
	<div id="top-header" class="row">
		<!-- Profile area -->
		<div class="sidebar col-md-2 col-sm-2" id="profile-dropdown-menu-toggle" ng-click="toggleShow()">
			<div id="profile-area">
				<div class="media">
					<div class="media-left">
				    	<img class="media-object" src="{{user.photoUrl}}" alt="{{user.nickName}} profile picture">
				  	</div>
				</div>
				<div class="status {{user.status}}"></div>
			    <div class="nickname">{{user.nickName}}</div>
			</div>
			<div id="profile-dropdown-menu" ng-show="showDropdown">
				<ul>
					<li>Edit your profile</li>
					<li ng-click="changeStatus()"><span ng-show="user.status == 'away'">[Away]- </span>Set yourself to <span class="bold">{{oppositeStatus}}</span></li>
					<li role="separator" class="divider"></li>
					<li>Statistics</li>
					<li role="separator" class="divider"></li>
					<li ng-click="logout()">Sign out</li>
				</ul>
			</div>
		</div>
		<!-- Main activity menu -->
		<div id="main-header" class="col-md-10 col-sm-10">
			<header id="gotcha-header">
				<div class="chat-header left col-md-9 col-sm-9">
					<div class="chat-title left">
						<h5 id="chat-name-container" class="chat-name-container bold">
							<span class="chat-name" ng-show="isChannel"><span class="italic">&#35;</span> {{activeChat.name}}</span>
							<span class="chat-name" ng-show="isDirectMessage"><span class="italic">&#64;</span> {{activeChat.user.nickName}}</span>
						</h5>
						<div class="chat-header-info" ng-show="isChannel">
							<div class="chat-header-info-item chat-members"><span id="header-member-count" class="icon glyphicon glyphicon-user"></span>{{activeChat.subscribers.length}}</div>
							<div class="chat-header-info-item chat-purpose">{{activeChat.description}}</div>
						</div>
						<div class="chat-header-info" ng-show="isDirectMessage">
							
							<div class="chat-header-info-item"><span id="other-user-status" class="status {{activeChat.user.status}}"></span> {{activeChat.user.status}}<span class="last-seen-time" ng-show="activeChat.user.status == 'away'">- last seen: {{activeChat.user.lastSeen}}</span></div>
							<div class="chat-header-info-item">{{activeChat.user.description}}</div>
						</div>
					</div>
					<div class="divider-bar right"></div>
					<div class="chat-header-actions right">
						<div class="icon right"><span class="glyphicon glyphicon-cog" aria-hidden="true"></span></div>
						<div class="icon right"><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span></div>
					</div>
				</div>
				<div class="global-header col-md-3 col-sm-3">
					<div id="search-container" class="col-md-10 col-sm-10">
						<form role="search" accept-charset="utf-8" id="global-search-form">
							<div class="search-icon left"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></div>
							<div class="search-input left">
								<input type="text" ng-model="searchQuery" name="query" placeholder="Search" autocomplete="off" maxlength="120">
							</div>
							<div class="search-input-clear right" ng-show="searchQuery"><span class="glyphicon glyphicon-remove-circle" aria-hidden="true" ng-click="searchQuery=''"></span></div>
							<div class="popover-menu"></div>
						</form>
					</div>
					<div id="recent-mentions" class="col-md-2 col-sm-2 right">
						<div class="icon right"><span class="glyphicon glyphicon-tags" aria-hidden="true"></span></div>
					</div>
				</div>
			</header>
		</div>
	</div>
	<div id="main-activity-window" class="row">
		<!-- Sidebar & lists -->
		<div class="sidebar col-md-2 col-sm-2">
			<div id="channels-list">
				<span class="list-header">Channels <span class="counter" ng-hide="length(channels) == 0">({{length(channels)}})</span><span data-toggle="modal" data-target="#create-channel-form" class="icon right glyphicon glyphicon-plus-sign"></span></span>
				<ul>
					<li id="channel-{{channel.name}}" ng-repeat="channel in channels" ng-click="openChannel(channel.name)"><span class="italic">&#35;</span> {{channel.name}} <span ng-click="unsubscribe(channel.name)" class="remove icon right glyphicon glyphicon-remove-circle"></span></li>
				</ul>
			</div>
			<div id="direct-messages-list">
				<span class="list-header">Direct Messages <span id="" class="icon right glyphicon glyphicon-plus-sign"></span></span>
				<ul>
					<li id="message-{{directMessage.user.nickName}}" ng-repeat="directMessage in directMessages" ng-click="openDirectMessage(directMessage.user.nickName)"><span id="other-user-status" class="status {{directMessage.user.status}}"></span>{{directMessage.user.nickName}}</li>
				</ul>
			</div>
		</div>
		<!-- Main activity window (active chat & typing area) -->
		<div id="activity-window" class="col-md-10 col-sm-10">
			<!-- Active chat -->
			<div id="active-chat">
				<div id="chat-console">
					<div ng-repeat="message in activeChat.messages | orderBy: message.time: true" class="messages-item">
						<div class="media-left photo left">
					    	<img class="sender-photo media-object" ng-src="{{user.photoUrl}}" alt="{{user.nickName}} profile picture">
					  	</div>
			    		<div class="sender nickname"><span class="bold message-sender">{{message.from}}</span><span class="message-time">{{message.time}}</span></div>
						<div class="message-text">{{message.text}}</div>
					</div>
				</div>
			</div>
			<!-- Typing area -->
			<div id="typing-area">
				<div id="input-message-container">
					<div class="addon-button">
						<span class="icon left glyphicon glyphicon-paperclip"></span>
					</div>
					<div id="input-message" class="left">
						<form name="inputMessageForm" novalidate ng-submit="inputMessageForm.$valid && send()" >
							<input type="text" class="left" ng-model="inputMessage" autocomplete="off" maxlength="500" placeholder="Message {{activeChat.name}}" required>
						</form>
					</div>
					<div id="send-button">
						<span class="icon right glyphicon glyphicon-send" ng-click="send()" ng-hide="inputMessage == undefined || inputMessage == ''"></span>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div id="create-channel-form" class="modal fade" role="dialog">
		 <div class="modal-dialog">
		    <!-- Modal content-->
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal">&times;</button>
		        <h4 class="modal-title">Create a channel</h4>
		      	</div>
		      	<div class="modal-body">
			        <div id="create-channel-form">
						<div class="notification channel-creation-notification"></div>
						<form name="create-channel-form" ng-submit="createChannel()">
							<div class="form-group">
								<label for="channel-name">Channel Name</label>
								<input type="text" ng-model="channelName" id="channel-name" maxlength="30" class="form-control" ng-keyup="validate()">
								<span ng-class="valid" aria-hidden="true"></span>
							</div>
							<div class="form-group">
								<label for="description">Description <span>(optional)</span></label>
								<input type="text" ng-model="channelDescription" id="description" maxlength="500" class="form-control">
							</div>

			      			<button type="submit" class="btn btn-default" ng-disabled="disableChannelCreation">Create Channel</button>	
						</form>
					</div>
		      	</div>
		    </div>
		</div>
	</div>
</div>